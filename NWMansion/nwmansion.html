<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Mansion Project</title>
  <style>
    body {
      margin: 0;
      background: #222;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }

    #game {
      position: relative;
      background-size: cover;
      background-position: center;
      border: 6px solid #444;
      border-radius: 12px;
      box-shadow: 0 0 30px rgba(0, 0, 0, 0.8);
      overflow: hidden;
      transition: width 0.3s, height 0.3s;
    }

    .hotspot {
      position: absolute;
      cursor: pointer;
      background: rgba(255, 0, 0, 0.3);
    }
  </style>
</head>
<body>
  <div id="game"></div>

  <script>
    const game = document.getElementById("game");

    const scenes = {
      exterior: {
        background: "mansion-exterior.png",
        hotspots: [
          { x: "56%", y: "40%", w: "5%", h: "12%", target: "gate" },
          { x: "45%", y: "25%", w: "5%", h: "10%", target: "mainhall" },
          { x: "10%", y: "30%", w: "5%", h: "5%", target: "backyardoutskirts" }
        ]
      },
      gate: {
        background: "mansion-gate.png",
        hotspots: [
          { x: "5%", y: "60%", w: "15%", h: "25%", target: "exterior" }
        ]
      },
      mainhall: {
        background: "main-hall.png",
        hotspots: [
          { x: "95%", y: "65%", w: "10%", h: "20%", target: "exterior" },
          { x: "12%", y: "37%", w: "5%", h: "5%", target: "ciderfountain" },
          { x: "46%", y: "20%", w: "5%", h: "15%", target: "icepacifica" }
        ]
      },
      backyardoutskirts: {
        background: "backyard-outskirts.png",
        hotspots: [
          { x: "45%", y: "20%", w: "15%", h: "15%", target: "exterior" }
        ]
      },
      ciderfountain: {
        background: "ciderfountain.png",
        hotspots: [
          { x: "5%", y: "60%", w: "15%", h: "25%", target: "mainhall" }
        ]
      },
      icepacifica: {
        background: "pacificastatue.png",
        hotspots: [
          { x: "5%", y: "60%", w: "15%", h: "25%", target: "mainhall" }
        ]
      }
    };

    function loadScene(name) {
      const scene = scenes[name];

      // Load image first to get its natural size
      const img = new Image();
      img.src = scene.background;
      img.onload = () => {
        let width = img.naturalWidth;
        let height = img.naturalHeight;

        // Scale down if too big for viewport
        const maxWidth = window.innerWidth * 0.9;
        const maxHeight = window.innerHeight * 0.9;
        const scale = Math.min(maxWidth / width, maxHeight / height, 1);

        game.style.width = width * scale + "px";
        game.style.height = height * scale + "px";
        game.style.backgroundImage = `url(${scene.background})`;

        // Clear and re-add hotspots
        game.innerHTML = "";
        scene.hotspots.forEach(h => {
          const spot = document.createElement("div");
          spot.className = "hotspot";
          spot.style.left = h.x;
          spot.style.top = h.y;
          spot.style.width = h.w;
          spot.style.height = h.h;
          spot.onclick = () => loadScene(h.target);
          game.appendChild(spot);
        });
      };
    }

    // Start at exterior
    loadScene("exterior");
  </script>
</body>
</html>
