<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Land Before Slime</title>
  <style>
    body {
      margin: 0;
      background: #222;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }

    #game {
      position: relative;
      background-size: cover;
      background-position: center;
      border: 6px solid #444;
      border-radius: 12px;
      box-shadow: 0 0 30px rgba(0, 0, 0, 0.8);
      overflow: hidden;
      transition: width 0.3s, height 0.3s;
    }

    .hotspot {
      position: absolute;
      cursor: pointer;
      background: rgba(255, 0, 0, 0.3);
    }

    /* Grid overlay */
    .grid {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: grid;
      grid-template-columns: repeat(20, 1fr);
      grid-template-rows: repeat(20, 1fr);
      pointer-events: none; /* let clicks pass through */
      z-index: 100;
    }

    .grid-cell {
      border: 1px solid rgba(255, 255, 255, 0.15);
      box-sizing: border-box;
    }
  </style>
</head>
<body>
  <div id="game"></div>

  <script>
    const game = document.getElementById("game");

    const scenes = {
      exterior: {
        background: "1outside-1.png",
        hotspots: [
          { x: "62.25%", y: "50%", w: "20%", h: "30%", target: "buildingcloseup" }
        ]
      },
      buildingcloseup: {
        background: "2buildingcloseup.png",
        hotspots: [
          { x: "5%", y: "60%", w: "15%", h: "25%", target: "exterior" },
          { x: "52%", y: "30%", w: "15%", h: "40%", target: "buildinginterior" },
        ]
      },
      buildinginterior: {
        background: "3enteringTheBuilding.png",
        hotspots: [
          { x: "47%", y: "55%", w: "5%", h: "12%", target: "mcbucketchair" },
          { x: "35%", y: "70%", w: "30%", h: "20%", target: "thewaydown" },
        ]
      },
      mcbucketchair: {
        background: "3-1chairtositon.png",
        hotspots: [
          { x: "45%", y: "20%", w: "15%", h: "15%", target: "buildinginterior" }
        ]
      },
      thewaydown: {
        background: "3thewaydown.png",
        hotspots: [
          { x: "5%", y: "60%", w: "15%", h: "25%", target: "buildinginterior" },
          { x: "80%", y: "45%", w: "5%", h: "12%", target: "mcbucketchair" },
          { x: "35%", y: "70%", w: "30%", h: "20%", target: "lookingdown" },
        ]
      },
      lookingdown: {
        background: "4lookingdown.png",
        hotspots: [
          { x: "50%", y: "50%", w: "5%", h: "5%", target: "goingdown" },
          { x: "5%", y: "50%", w: "5%", h: "5%", target: "thewaydown" }
        ]
      },
      goingdown: {
        background: "5goingDown1.png",
        hotspots: [
          { x: "20%", y: "90%", w: "40%", h: "10%", target: "mineentrance" }
        ]
      },
      mineentrance: {
        background: "6mineentrance.png",
        hotspots: [
          { x: "30%", y: "10%", w: "10%", h: "10%", target: "goingdown" },
          { x: "30%", y: "70%", w: "5%", h: "5%", target: "flora1" },
          { x: "40%", y: "80%", w: "5%", h: "5%", target: "flora2" },
          { x: "50%", y: "90%", w: "5%", h: "5%", target: "flora3" },
          { x: "80%", y: "80%", w: "5%", h: "5%", target: "deadexplorer" },
          { x: "50%", y: "15%", w: "20%", h: "55%", target: "minecorridor" },
        ]
      },
      flora1: {
        background: "6-1flora1.png",
        hotspots: [
          { x: "20%", y: "90%", w: "40%", h: "10%", target: "mineentrance" }
        ]
      },
      flora2: {
        background: "6-2flora2.png",
        hotspots: [
          { x: "20%", y: "90%", w: "40%", h: "10%", target: "mineentrance" }
        ]
      },
      flora3: {
        background: "6-3flora3.png",
        hotspots: [
          { x: "20%", y: "90%", w: "40%", h: "10%", target: "mineentrance" }
        ]
      },
      deadexplorer: {
        background: "6-4deadexplorer.png",
        hotspots: [
          { x: "20%", y: "90%", w: "40%", h: "10%", target: "mineentrance" }
        ]
      },
      minecorridor: {
        background: "7walkinginsidemine.png",
        hotspots: [
          { x: "0%", y: "20%", w: "10%", h: "70%", target: "mineentrance" },
          { x: "90%", y: "20%", w: "10%", h: "70%", target: "rex" }
        ]
      },
      rex: {
        background: "8frozentrex.png",
        hotspots: [
          { x: "0%", y: "20%", w: "10%", h: "70%", target: "minecorridor" },
          { x: "90%", y: "20%", w: "10%", h: "70%", target: "frozendinos" },
          { x: "0%", y: "20%", w: "10%", h: "70%", target: "minecorridor" }
        ]
      },
      frozendinos: {
        background: "9frozendinos.png",
        hotspots: [
          { x: "0%", y: "20%", w: "10%", h: "70%", target: "rex" },
          { x: "90%", y: "20%", w: "10%", h: "70%", target: "morefrozendinos" }
        ]
      },
      morefrozendinos: {
        background: "11morefrozendinos.png",
        hotspots: [
          { x: "0%", y: "20%", w: "10%", h: "70%", target: "frozendinos" },
          { x: "90%", y: "20%", w: "10%", h: "70%", target: "morefrozendinos" }
        ]
      }
    };

    let gridOverlay;
    let gridVisible = true;

    // Create the grid overlay once
    function createGrid() {
      gridOverlay = document.createElement("div");
      gridOverlay.className = "grid";

      for (let i = 0; i < 400; i++) { // 20x20
        const cell = document.createElement("div");
        cell.className = "grid-cell";
        gridOverlay.appendChild(cell);
      }
    }

    function loadScene(name) {
      const scene = scenes[name];
      const img = new Image();
      img.src = scene.background;

      img.onload = () => {
        let width = img.naturalWidth;
        let height = img.naturalHeight;

        // Fit into viewport
        const maxWidth = window.innerWidth * 0.9;
        const maxHeight = window.innerHeight * 0.9;
        const scale = Math.min(maxWidth / width, maxHeight / height, 1);

        game.style.width = width * scale + "px";
        game.style.height = height * scale + "px";
        game.style.backgroundImage = `url(${scene.background})`;

        game.innerHTML = ""; // clear hotspots
        scene.hotspots.forEach(h => {
          const spot = document.createElement("div");
          spot.className = "hotspot";
          spot.style.left = h.x;
          spot.style.top = h.y;
          spot.style.width = h.w;
          spot.style.height = h.h;
          spot.onclick = () => loadScene(h.target);
          game.appendChild(spot);
        });

        // Add grid overlay back on top
        if (gridOverlay) {
          game.appendChild(gridOverlay);
          gridOverlay.style.display = gridVisible ? "grid" : "none";
        }
      };
    }

    // Keyboard toggle for grid
    document.addEventListener("keydown", e => {
      if (e.key.toLowerCase() === "g") {
        gridVisible = !gridVisible;
        if (gridOverlay) gridOverlay.style.display = gridVisible ? "grid" : "none";
      }
    });

    // Initialize grid and first scene
    createGrid();
    loadScene("exterior");
  </script>
</body>
</html>
